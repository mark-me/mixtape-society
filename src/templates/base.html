<!DOCTYPE html>
<html lang="nl" data-bs-theme="auto">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
      {% block title %}
        Mixtape creation
      {% endblock %}| Mixtape Society
    </title>
    <!-- Adaptive filled cassette favicon (black in light, white in dark) -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.svg') }}" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='favicon.svg') }}" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <!-- Bootstrap 5.3 + Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <!-- Block for extra meta tags (social cards) -->
    {% block extra_meta %}
    {% endblock %}

    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}" />
    {% block extra_css %}
    {% endblock %}
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-success shadow-sm">
      <div class="container">
        <a class="navbar-brand position-relative d-flex align-items-center" href="/mixtapes" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Version v{{ app_version }}">
          <img src="{{ url_for('static', filename='logo.svg') }}" alt="Mixtape Society" width="47" height="30" class="me-2" />
          Mixtape Society
        </a>

        <ul class="navbar-nav ms-auto align-items-center">
          <!-- Theme switcher -->
          <li class="nav-item dropdown ms-3">
            <button class="btn btn-outline-light dropdown-toggle d-flex align-items-center gap-2" type="button" data-bs-toggle="dropdown" id="themeNavbarButton"><i class="bi bi-sun-fill" id="themeNavbarIcon"></i></button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li>
                <button class="dropdown-item d-flex align-items-center gap-2" data-theme="light"><i class="bi bi-sun-fill"></i> Light</button>
              </li>
              <li>
                <button class="dropdown-item d-flex align-items-center gap-2" data-theme="dark"><i class="bi bi-moon-stars-fill"></i> Dark</button>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <button class="dropdown-item d-flex align-items-center gap-2 active" data-theme="auto"><i class="bi bi-circle-half"></i> System</button>
              </li>
            </ul>
          </li>
          <!-- New: GitHub link -->
          <li class="nav-item ms-3">
            <a class="nav-link text-white" href="https://github.com/mark-me/mixtape-society" target="_blank" rel="noopener noreferrer" data-bs-toggle="tooltip" data-bs-placement="bottom" title="View source on GitHub"><i class="bi bi-github fs-4"></i></a>
          </li>
        </ul>
      </div>
    </nav>

    <main>
      {% block content %}

      {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white-50 py-4 mt-5">
      <div class="container text-center">
        <small>© {{ now.year }} Mixtape Society • Mark Zwart</small>
      </div>
    </footer>

    <!-- ==== GLOBAL APP MODAL (used by showAlert / showConfirm) ==== -->
    <div class="modal fade" id="appModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <!-- Header – title + close button -->
            <div class="modal-header">
                <h5 class="modal-title" id="appModalTitle"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Body – filled dynamically -->
            <div class="modal-body" id="appModalBody"></div>

            <!-- Footer – buttons injected dynamically -->
            <div class="modal-footer" id="appModalFooter"></div>
            </div>
        </div>
    </div>

    <!-- ==== NAVIGATION GUARD MODAL (custom “Leave page?”) ==== -->
    <div class="modal fade" id="navigateAwayModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

        <div class="modal-header">
            <h5 class="modal-title">Unsaved changes</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"
                    aria-label="Close"></button>
        </div>

        <div class="modal-body">
            You have unsaved changes. Are you sure you want to leave this page?
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-secondary"
                    data-bs-dismiss="modal" id="stayBtn">Stay</button>
            <button type="button" class="btn btn-danger"
                    id="leaveBtn">Leave</button>
        </div>

        </div>
    </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+R/ZzU4ZJ3v7q7i4c1d6j6f7u6s9iL" crossorigin="anonymous"></script>
    <script type="module" src="{{ url_for('static', filename='js/base/index.js') }}"></script>

    {% block extra_js %}
    {% endblock %}
  </body>
</html>
