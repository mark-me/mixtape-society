/* --- 1. Global & Body Overrides --- */
body {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
}

/* Player panel background fixes */
#main-player {
    background: var(--bs-body-bg);
}

#main-player::-webkit-media-controls-panel {
    background-color: var(--bs-body-bg);
}

/* Bottom player background – translucent blur */
#bottom-player-container .bg-dark {
    background-color: rgba(var(--bs-body-bg-rgb), 0.95) !important;
    backdrop-filter: blur(10px);
}

/* Fix light mode heading color */
h4.text-white {
    color: var(--bs-heading-color) !important;
}

/* --- 2. Bottom Player Text Truncation & Layout --- */
#bottom-now-title,
#bottom-now-artist-album {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Limit the width of the track info section so it doesn't push controls off-screen */
.me-4.flex-shrink-0 {
    min-width: 0;
    /* Allows flex item to shrink below content size */
    max-width: 50vw;
    /* On very small screens, limit to ~half viewport */
    flex: 1 1 150px;
    /* Flexible growth/shrink, with a reasonable base */
}

#bottom-player-container .d-flex {
    min-width: 0;
    /* Prevents flex container overflow issues */
}

/* Mobile font size adjustments for bottom player */
@media (max-width: 576px) {
    #bottom-now-title {
        font-size: 0.9rem;
    }

    #bottom-now-artist-album {
        font-size: 0.75rem;
    }
}

/* --- 3. Track List – Layout & Numbering --- */

.track-item {
    padding: 1rem 1.5rem !important;
}

/* Text truncation */
.track-item .min-width-0 {
    min-width: 0;
}

/* Title */
.track-item .fw-bold {
    font-size: 1.15rem;
    line-height: 1.35;
}

/* Artist/album line */
.track-item .opacity-85 {
    opacity: 0.85;
    font-size: 0.95rem;
}

/* Play button hover (turns primary color) */
.track-item .play-this-track:hover {
    background-color: var(--bs-primary) !important;
    color: white !important;
    transform: scale(1.08);
}

/* Mobile tweaks */
@media (max-width: 576px) {

    /* 1️⃣ Bootstrap .container and .container‑fluid have 15 px side padding.
        We strip that padding on phones so the inner columns can reach the
        very edge of the viewport. */
    .container,
    .container-fluid {
        padding-left: 0 !important;
        padding-right: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
        max-width: 100% !important;
    }

    /* 2️⃣ The row that holds the two columns (.row.g‑5) adds a horizontal
        gap (the “g‑5” gutter). We already removed the gap in the previous
        snippet, but we also need to force the row itself to be full‑width. */
    .row.g-5 {
        margin-left: 0 !important;
        margin-right: 0 !important;
        width: 100% !important;
    }

    /* 3️⃣ Force the column that contains the track list to occupy the
        full width of its parent (the row). This also removes the default
        15 px column padding that Bootstrap applies. */
    .col-lg-8,
    .col-lg-4 {                     /* also affects the left‑hand column
                                      so the whole page aligns */
        padding-left: 0 !important;
        padding-right: 0 !important;
        margin-left: 0 !important;
        margin-right: 0 !important;
        flex: 0 0 100% !important;   /* 100 % of the row */
        max-width: 100% !important;
    }

    /* 4️⃣ The list that actually renders the tracks – make it flush. */
    .list-group {
        width: 100%;
        margin-left: 0;
        margin-right: 0;
    }

    /* 5️⃣ Individual track rows – already full‑width, but we tighten the
        side padding a little more (feel free to adjust the .5rem value). */
    .track-item {
        width: 100%;
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
        box-sizing: border-box;
    }

    /* 6️⃣ Small tweak: shrink the play button so the text gets even more
        room on very narrow screens. */
    .track-item .play-this-track {
        width: 44px;
        height: 44px;
        margin-right: 0.4rem;
    }

    /* 7️⃣ Ensure the text block can truncate correctly. */
    .track-item .flex-grow-1 {
        min-width: 0;
    }
}

/* --- 4. Track States (Hover & Active) --- */
.track-item:hover {
    background-color: var(--bs-secondary-bg) !important;
}

/* Active (now playing) track - better color */
.track-item.active-track {
    background: var(--bs-primary-bg-subtle) !important;
    color: var(--bs-primary-text-emphasis) !important;
}

.track-item.active-track .opacity-75 {
    opacity: 0.9 !important;
    color: var(--bs-secondary-color) !important;
}


/* --- 5. Big Play Button – Theme Adaptive Outline --- */
.theme-outline-btn {
    border-color: var(--bs-primary) !important;
    color: var(--bs-primary) !important;
    background-color: transparent !important;
}

.theme-outline-btn:hover {
    background-color: var(--bs-primary) !important;
    color: white !important;
}

/* Light mode specific */
html[data-bs-theme="light"] .theme-outline-btn {
    border-color: #212529;
    color: #212529;
}

html[data-bs-theme="light"] .theme-outline-btn:hover {
    background-color: #212529;
    color: white;
}

/* Dark mode specific */
html[data-bs-theme="dark"] .theme-outline-btn {
    border-color: #f8f9fa;
    color: #f8f9fa;
}

html[data-bs-theme="dark"] .theme-outline-btn:hover {
    background-color: #f8f9fa;
    color: #212529;
}

.subtle-play-btn {
    border-color: var(--bs-border-color);
}

/* --- 6. Liner Notes Typography --- */
#rendered-liner-notes {
    line-height: 1.7;
    font-size: 1rem;
}
#rendered-liner-notes h1 { font-size: 1.8rem; margin: 1.5em 0 0.8em; }
#rendered-liner-notes h2 { font-size: 1.5rem; margin-top: 1.5em; }
#rendered-liner-notes h3 { font-size: 1.3rem; }
#rendered-liner-notes p { margin-bottom: 1em; }
#rendered-liner-notes ul,
#rendered-liner-notes ol { padding-left: 1.5em; margin-bottom: 1em; }
#rendered-liner-notes strong { font-weight: 600; }

/* --- 7. UI Animations --- */
.transition-chevron {
    transition: transform 0.25s ease;
}

.transition-chevron.rotated {
    transform: rotate(180deg);
}

/* --- 8. Mobile-Specific Adjustments --- */
@media (max-width: 768px) {
    #linerNotesCollapse .card-body {
        padding: 1rem;
    }
}

@media (max-width: 576px) {
    /* Reduce spacing above Tape Talk section on mobile */
    .mt-5 {
        margin-top: 2rem !important;
    }

    /* Reduce spacing around the button area on mobile */
    .text-center.my-5 {
        margin-top: 1.5rem !important;
        margin-bottom: 1.5rem !important;
    }

    /* Keep buttons on same row, hide text, show only icons */
    .btn-group {
        flex-direction: row;
        gap: 0.5rem;
        justify-content: center;
    }

    .btn-group .btn,
    .btn-group a.btn {
        width: auto;
        margin-left: 0 !important;
        padding: 0.75rem 1.25rem;
    }

    /* Hide button text on mobile */
    #big-play-btn .btn-text,
    #big-share-btn .btn-text,
    .btn-group a.btn .btn-text {
        display: none;
    }

    /* Make icons slightly larger since there's no text */
    #big-play-btn i {
        font-size: 1.8rem !important;
        margin: 0 !important;
        top: 0 !important;
    }

    #big-share-btn i,
    .btn-group a.btn i {
        font-size: 1.6rem !important;
        margin: 0 !important;
    }

    #big-share-btn {
        margin-left: 0 !important;
    }
}

/* --- 9. Audio player --- */
/* --------------------------------------------------------------
   Bottom player – make the track‑info area use all available space
   -------------------------------------------------------------- */

/* 1️⃣ Remove the 140 px cap and let the info grow */
#bottom-player-container .me-2 {
    max-width: none !important;           /* override the inline max‑width */
}

/* 2️⃣ Let the info block flex‑grow so it takes the remaining width */
#bottom-player-container #bottom-now-title,
#bottom-player-container #bottom-now-artist-album {
    /* These already have .text-truncate, keep it */
    width: 100%;                          /* ensure they fill the container */
}

/* 3️⃣ Make the wrapper that holds the close‑button + info a flex item
    that can grow, but keep the close button at its natural size. */
#bottom-player-container .d-flex.align-items-center.mb-2.mb-md-0 {
    flex: 1 1 auto;                      /* allow it to expand */
    min-width: 0;                         /* enable truncation */
}

/* 4️⃣ Reduce the horizontal margin on the native <audio> element
    so it doesn’t steal space from the info block. */
#bottom-player-container audio#w-main-player,
#bottom-player-container audio#main-player {
    margin-left: 0.5rem !important;
    margin-right: 0.5rem !important;
}

/* 5️⃣ On phones the three groups (info, controls, audio) can wrap.
    Force them onto a single line when there’s enough width, but
    allow wrapping only when the viewport is < 480 px. */
@media (max-width: 480px) {
    #bottom-player-container .d-flex.align-items-center.flex-wrap {
        flex-wrap: wrap;                 /* let them stack on very small screens */
    }

    /* Give each group a little bottom margin when stacked */
    #bottom-player-container .d-flex.align-items-center.mb-2.mb-md-0,
    #bottom-player-container .mb-2.mb-md-0,
    #bottom-player-container audio#main-player {
        margin-bottom: 0.4rem;
    }
}

/* 6️⃣ Optional – make the close button a bit smaller on phones
    so the info gets a few extra pixels. */
@media (max-width: 576px) {
    #bottom-player-container #close-bottom-player {
        padding: 0.25rem 0.4rem;
        font-size: 0.9rem;
    }
}

